import tkinter as tk
from tkinter import simpledialog, messagebox

def realizar_corte():
    root = tk.Tk()
    root.withdraw()

    messagebox.showinfo("1 - Passo", "Entrada de dados: comprimento da tora, quantidade de cortes e custo por metro cortado.")

    L = int(simpledialog.askstring("Entrada", "Digite o comprimento da tora (em metros): "))
    N = int(simpledialog.askstring("Entrada", "Digite a quantidade de cortes desejados: "))
    R = float(simpledialog.askstring("Entrada", "Digite o custo por metro de corte: "))

    cortes = []
    cortes_impossiveis = []  # Para armazenar cortes impossíveis

    for i in range(N):
        posicao = int(simpledialog.askstring("Entrada", f"Digite a posição do corte {i + 1}: "))
        if 0 < posicao < L:
            cortes.append(posicao)
        else:
            cortes_impossiveis.append(posicao)
            messagebox.showwarning("Aviso", f"O corte na posição {posicao} não pode ser feito, pois excede o comprimento da tora ou é inválido.")

    if cortes_impossiveis:
        resposta = messagebox.askyesno("Continuar", "Deseja continuar com os cortes possíveis e ignorar os cortes impossíveis?")
        if not resposta:
            messagebox.showinfo("Operação Cancelada", "Operação cancelada.")
            root.quit()
            return
        else:
            messagebox.showinfo("Cortes Ignorados", f"Cortes impossíveis: {cortes_impossiveis}. Serão ignorados.")

    if not cortes:
        resposta = messagebox.askyesno("Nova Tora", "Não foi possível realizar nenhum corte válido. Você tem outra tora disponível para realizar o corte?")
        if resposta:
            L = int(simpledialog.askstring("Entrada", "Digite o comprimento da nova tora (em metros): "))
            realizar_corte() 
            return
        else:
            messagebox.showinfo("Operação Finalizada", "Operação finalizada sem realizar nenhum corte.")
            root.quit()
            return

    messagebox.showinfo("2 - Passo", "Adicionando cortes nas extremidades para calcular corretamente os segmentos.")
    cortes.append(0)
    cortes.append(L)

    messagebox.showinfo("3 - Passo", "Ordenando os cortes do menor para o maior (Selection Sort).")
    for i in range(len(cortes)):
        min_idx = i
        for j in range(i + 1, len(cortes)):
            if cortes[j] < cortes[min_idx]:
                min_idx = j
        cortes[i], cortes[min_idx] = cortes[min_idx], cortes[i]

    messagebox.showinfo("4 - Passo", "Calculando o custo total dos cortes.")

    comprimento_total = 0
    for i in range(len(cortes) - 1):
        comprimento_total += cortes[i + 1] - cortes[i]

    custo_total = comprimento_total * R

    messagebox.showinfo("Resultado", f"O custo total dos cortes é de R$ {custo_total:.2f}")

    root.quit()  

realizar_corte()
